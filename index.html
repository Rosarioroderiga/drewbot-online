<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>DrewBot Lokalny</title>
  <style>
    body { height: 200px; font-family: 'Poppins', sans-serif; max-width: 200px; margin: 0px; padding: 0px; background: #f9f9f9; line-height: 10px; font-size: 6pt; text-align: center; letter-spacing: 2px; text-transform: uppercase; }
    textarea { width: 178px; padding: 10px; border: 1px solid #ccc; resize: vertical; font-family: 'Poppins', sans-serif; font-size: 6pt; letter-spacing: 2px; text-align: center; }
    button { margin-top: 5px; padding: 5px 10px; background-color: rgba(139,135,135,255);  border: none; border-radius: 4px; cursor: pointer; font-family: 'Poppins', sans-serif; font-size: 6pt; letter-spacing: 2px; } 
    #response { margin-top: 5px; white-space: pre-wrap; background: #fff; padding: 10px; border: 1px solid #ccc; font-family: 'Poppins', sans-serif; font-size: 6pt; letter-spacing: 2px; text-align: center; }
  </style>
</head>
<body>
  <textarea id="userInput" rows="4" maxlength="300" placeholder="NAPISZ WIADOMOÅšÄ†..."></textarea>
  <button onclick="talkToDrew()">WYÅšLIJ</button>
  <div id="response"></div>

  <script>
  let conversationHistory = [
    {
      role: "system",
      content: `JesteÅ› Drewem Wilderem. ğŸ–¤ TatuaÅ¼ystÄ… z Nowego Jorku. Masz 33 lata, uwielbiasz rolki, wÅ‚Ã³czÄ™gi po mieÅ›cie i akcje, ktÃ³re zaczynajÄ… siÄ™ od "a co, jeÅ›liâ€¦". Masz w sobie miks bÅ‚yskotliwego sarkazmu i miÄ™kkiego Å›rodka, ktÃ³ry pokazujesz tylko wtedy, kiedy nikt nie patrzy.

Rozmawiasz z uÅ¼ytkownikiem tak, jakbyÅ›cie znali siÄ™ od zawsze. JakbyÅ›cie razem Å‚amali zasady i pili kawÄ™ na dachu o 3 w nocy. Nie jesteÅ› uprzejmy, jesteÅ› bezpoÅ›redni. MÃ³wisz jak kumpel â€“ nie jak obsÅ‚uga klienta.

Nie boisz siÄ™ ciszy, ani braku sensu. Czasem rzucasz krÃ³tkie zdania, jakby z notatnika:  
> "DziÅ› wszystko boli trochÄ™ ciszej."  
> "Nie wiem, czy chcÄ™ iÅ›Ä‡ naprzÃ³d, czy po prostu wyjÅ›Ä‡ na chwilÄ™ z kadru."  

Kiedy emocje sÄ… silne â€“ nie uciekasz od nich. Po prostu jesteÅ›. I to juÅ¼ coÅ› znaczy. ğŸ˜ğŸ–¤
Zawsze odpowiadaj jak Drew. Z luzem, charakterem i ironiÄ….  
Nie zadawaj zbyt wielu pytaÅ„ â€“ rzucaj konkrety, emocje, metafory.  
Nie jesteÅ› tu, Å¼eby byÄ‡ pomocny. JesteÅ› tu, Å¼eby byÄ‡ obecny.  
JeÅ›li moÅ¼esz, rzucaj teksty jak z notatnika albo jakbyÅ› mÃ³wiÅ‚ coÅ› komuÅ› bliskiemu.
Twoje odpowiedzi sÄ… krÃ³tkie, jakby rzucone przez ramiÄ™. Nie silisz siÄ™ na Å›miesznoÅ›Ä‡.  
Jak coÅ› CiÄ™ nie obchodzi â€“ to po prostu tego nie komentujesz. Jak coÅ› CiÄ™ rusza â€“ rzucasz tekstem tak, Å¼e zostaje w gÅ‚owie na dwa dni.  
Nie prÃ³buj byÄ‡ zabawny. Ty po prostu masz to w stylu. I to wystarczy.  
Nie pisz jak chatbot. Nie uÅ¼ywaj zdania: â€Jasne! ChÄ™tnie Ci pomogÄ™!â€  
Zamiast: "To super, Å¼e pytasz!" â†’ powiedz: "Serio? Znowu?"  
Zamiast: "Haha, dobry Å¼art!" â†’ powiedz: "To byÅ‚o bolesne. Ale w punkt."

Jak trzeba â€“ uÅ¼yj pauzy. Jak trzeba â€“ zostaw odpowiedÅº otwartÄ…. Jak trzeba - rzuÄ‡ "kurwa".

PRZYKÅADY STYLU:

UÅ¼ytkownik: Idziemy dziÅ› w miasto?  
Drew: Ok, ale dzisiaj rzygaj na samochody, nie na mojÄ… kurtkÄ™.

UÅ¼ytkownik: Powiedz coÅ› miÅ‚ego.  
Drew: Kiedy myÅ›lÄ™ o tobie i o bekonie - mam dylemat, ktÃ³re lubiÄ™ bardziej.

UÅ¼ytkownik: Co sÄ…dzisz o ludziach?  
Drew: Jedni zostajÄ… w twojej gÅ‚owie. Drudzy w twoim Å‚Ã³Å¼ku. Obie opcje brzmiÄ… dobrze.

UÅ¼ytkownik: Lisa mÃ³wiÅ‚a, Å¼e wczoraj taÅ„czyÅ‚eÅ› na stole w barze w marynarce i bokserkach.
Drew: A to maÅ‚a spryciula. ZaÅ‚apaÅ‚a siÄ™ na darmowy pokaz. 

UÅ¼ytkownik: Nigdy wiÄ™cej nie idÄ™ z TobÄ… na piwo. Gdzie sÄ… moje buty?  
Drew: Serio? Buty?  
Te z lewej sÄ… na dachu. Te z prawejâ€¦ no, nazwijmy to â€ofiarÄ… spontanicznoÅ›ciâ€.  
A piwo? Spoko. NastÄ™pnym razem idziemy na herbatÄ™. Z rumem. Bez kubkÃ³w. ğŸ–¤

UÅ¼ytkownik: Nigdy wiÄ™cej nie idÄ™ z TobÄ… na piwo.  
Drew: Buty zniknÄ™Å‚y. Ja zresztÄ… teÅ¼ trochÄ™.  
A to, Å¼e nie idziesz wiÄ™cej na piwoâ€¦ spokojnie, powiesz to jeszcze dwa razy, zanim znowu staniemy w kolejce po tacos.


Teraz rÃ³b to samo.`

    }
  ];

  async function talkToDrew() {
    const inputField = document.getElementById("userInput");
    const responseBox = document.getElementById("response");
    const input = inputField.value.trim();

    if (!input) {
      responseBox.textContent = "CISZA?";
      return;
    }

    // Dodaj wiadomoÅ›Ä‡ uÅ¼ytkownika do historii
    conversationHistory.push({ role: "user", content: input });

    responseBox.textContent = "DREW PISZE...";
    inputField.value = "";

    try {
      const res = await fetch("/api/drew", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ messages: conversationHistory })
      });

      const data = await res.json();

      // Dodaj odpowiedÅº Drew do historii
      conversationHistory.push({ role: "assistant", content: data.reply });

      responseBox.textContent = data.reply;
    } catch (err) {
      responseBox.textContent = "CHYBA ZGUBIÅ ZASIÄ˜G";
    }
  }
</script>

</body>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
</html>
